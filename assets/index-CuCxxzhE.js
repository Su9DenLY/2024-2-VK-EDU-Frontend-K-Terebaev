(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}})();let c=[];const u=document.querySelector("form"),n=document.querySelector(".form-textarea"),l=document.querySelector(".section"),p=document.getElementById("delete-button");u.addEventListener("submit",y.bind(void 0));u.addEventListener("keypress",E.bind(void 0));window.addEventListener("beforeunload",h);n.addEventListener("input",L);p.addEventListener("click",()=>{c=[],localStorage.clear(),f()});g();f();function g(){c=JSON.parse(localStorage.getItem("messages"))||[]}function h(){localStorage.setItem("messages",JSON.stringify(c))}function v(s,t,i){c.push({username:s,text:t,time:i});const r=m(s,t,i);l.prepend(r),setTimeout(()=>{r.scrollIntoView({behavior:"smooth"})},0)}function m(s,t,i){const r=document.createElement("div"),e=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),d=document.createElement("span");return r.classList.add("message-container"),e.classList.add("message-content"),a.classList.add("message-status"),o.classList.add("message-username"),d.classList.add("material-symbols-outlined"),d.style.fontSize="14px",o.innerHTML=`${s}`,e.innerHTML=`<div>${t.replace(/\n/g,"<br>")}</div>`,a.innerText=`${i}`,d.innerText="check",a.appendChild(d),e.appendChild(a),r.appendChild(o),r.appendChild(e),r}function f(){l.innerHTML="";for(let s=c.length-1;s>=0;s--){const{username:t,text:i,time:r}=c[s],e=m(t,i,r);l.appendChild(e)}setTimeout(()=>{l.scrollTop=l.scrollHeight},0),n.dispatchEvent(new Event("input"))}function y(s){s.preventDefault();const t=n.value.trim();if(t){let i=new Date;v("Элизабет",t,`${i.getHours()}`.padStart(2,"0")+":"+`${i.getMinutes()}`.padStart(2,"0")),n.value=""}}function E(s){if(s.key==="Enter"){if(s.preventDefault(),s.shiftKey){const t=n.selectionStart;n.value=n.value.slice(0,t)+`
`+n.value.slice(t),n.selectionStart=n.selectionEnd=t+1}else u.dispatchEvent(new Event("submit"));n.dispatchEvent(new Event("input")),n.scrollTop=n.scrollHeight}}function L(){n.style.height="0px",n.style.height=n.scrollHeight+"px"}
